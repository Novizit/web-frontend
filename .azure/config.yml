# Azure App Service Configuration
# This file configures the deployment and runtime settings

# Build configuration
build:
  # Build commands
  commands:
    - npm ci --only=production
    - npm run build
  
  # Build artifacts
  artifacts:
    - .next/
    - public/
    - package.json
    - next.config.ts
    - tsconfig.json

# Runtime configuration
runtime:
  # Node.js version
  nodeVersion: "22.15.0"
  
  # Start command
  startCommand: "npm start"
  
  # Environment variables
  environment:
    NODE_ENV: "production"
    NEXT_TELEMETRY_DISABLED: "1"
    WEBSITE_NODE_DEFAULT_VERSION: "22.15.0"
    WEBSITE_RUN_FROM_PACKAGE: "1"
    SCM_DO_BUILD_DURING_DEPLOYMENT: "true"
    BUILD_FLAGS: "--platform nodejs --platform-version 22.15.0"

# Deployment settings
deployment:
  # Deployment method
  method: "zip"
  
  # Include files
  include:
    - "**/*"
  
  # Exclude files
  exclude:
    - "node_modules/**"
    - ".git/**"
    - "*.log"
    - "coverage/**"
    - ".env*"
    - ".next/cache/**"
    - "deployment.zip" 